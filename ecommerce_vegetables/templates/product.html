{% extends 'base.html' %}
{% block content %}

<div class="row align-items-center g-4 mt-4">

  <!-- Product Image -->
  <div class="col-md-6">
    <div class="card shadow-sm border-0 rounded-4 overflow-hidden">
      <img src="{{ url_for('static', filename='images/' ~ product.image) }}"
           class="img-fluid"
           alt="{{ product.name }}"
           style="height:350px; object-fit:cover;">
    </div>
  </div>

  <!-- Product Details -->
  <div class="col-md-6 d-flex flex-column justify-content-center">

    <h2 class="fw-bold mb-2">{{ product.name }}</h2>
    <p class="fs-4 text-success fw-bold mb-3">
      â‚¹{{ "%.2f"|format(product.price) }}
    </p>

    <p class="text-muted mb-4">
      Fresh, farm-picked vegetables delivered straight to your doorstep ðŸ¥•ðŸ¥¦
    </p>

    {% if current_user.is_authenticated %}

    <!-- ADD TO CART FORM (IMPORTANT) -->
    <form action="{{ url_for('add_to_cart', id=product.id) }}"
          method="POST"
          class="d-flex flex-column">

      <!-- Quantity Control -->
      <div class="quantity-control d-flex align-items-center mb-3">
        <button type="button" class="btn btn-outline-secondary btn-sm btn-minus">âˆ’</button>

        <input type="number"
               class="form-control form-control-sm mx-2 quantity-input text-center"
               value="1"
               min="1"
               style="max-width:80px;">

        <button type="button" class="btn btn-outline-secondary btn-sm btn-plus">+</button>
      </div>

      <!-- Hidden Quantity -->
      <input type="hidden" name="quantity" class="cart-quantity" value="1">

      <!-- Add to Cart -->
      <button type="submit" class="btn btn-primary btn-lg w-100 add-to-cart">
        ðŸ›’ Add to Cart
      </button>

    </form>

    {% else %}
    <a href="{{ url_for('login') }}" class="btn btn-outline-primary mt-3 w-100">
      Buy Now
    </a>
    {% endif %}

  </div>
</div>

<script src="{{ url_for('static', filename='js/script.js') }}"></script>
{% endblock %}
